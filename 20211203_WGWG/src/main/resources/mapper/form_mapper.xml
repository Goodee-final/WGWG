<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.min.edu.model.form.FormDaoImpl">

<resultMap type="com.min.edu.vo.form.Form" id="FormJoinVo">
	<result property="form_no" column="FORM_NO"/>
	<result property="form_nm" column="FORM_NM"/>
	<result property="form_reg_dt" column="FORM_REG_DT"/>
	<result property="fcdto.form_class_nm" column="FORM_CLASS_NM"/>
</resultMap>

<resultMap type="com.min.edu.vo.form.Form" id="FormDetailJoinVo">
	<result property="form_no" column="FORM_NO"/>
	<result property="form_nm" column="FORM_NM"/>
	<result property="template" column="TEMPLATE"/>
	<result property="form_reg_dt" column="FORM_REG_DT"/>
	<result property="fcdto.form_class_nm" column="FORM_CLASS_NM"/>
</resultMap>

<!-- 양식 분류 리스트 -->
<select id="selectFormcList" resultType="formcDto">
	SELECT FORM_CLASS_NO, FORM_CLASS_NM
		FROM FORM_CLASSIFICATION
</select>

<!-- 양식 리스트(조인) -->
<select id="selectFormList" resultMap="FormJoinVo">
	SELECT F.FORM_NO, F.FORM_NM, F.FORM_REG_DT, FC.FORM_CLASS_NM 
		FROM FORM f JOIN FORM_CLASSIFICATION fc 
		ON F.FORM_CLASS_NO = FC.FORM_CLASS_NO
		ORDER BY FORM_NO DESC
</select>

<!-- 양식 상세조회 -->
<select id="selectFormDetail" parameterType="java.lang.Integer" resultMap="FormDetailJoinVo">
	SELECT F.FORM_NO, F.FORM_NM, F.FORM_REG_DT, F.TEMPLATE, FC.FORM_CLASS_NM 
		FROM FORM f JOIN FORM_CLASSIFICATION fc 
		ON F.FORM_CLASS_NO = FC.FORM_CLASS_NO
		WHERE FORM_NO = ${form_no}
</select>
</mapper>
